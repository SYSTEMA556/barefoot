<!-- app/views/novels/_novel_cards.html.erb -->
<div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-2 g-4">
  <% novels.each do |novel| %>
    <div class="col">
  <div class="card h-100 shadow-sm border-0 bg-light">
    <div class="row g-0">
      <!-- Â∑¶Ôºö„É°„ÇøÊÉÖÂ†± or „Ç§„É°„Éº„Ç∏Ôºà„Ç¢„Ç§„Ç≥„É≥„ÇÑ„Çø„Ç∞Ôºâ -->
      <div class="col-3 d-flex flex-column justify-content-center align-items-center p-2 text-center bg-light border-end">
        <div class="mb-2">
          <i class="bi bi-book fs-2 text-secondary"></i>
        </div>
        <small class="text-muted">üí¨ <%= novel.comments_count || 0 %></small>
      </div>

      <!-- Âè≥ÔºöÊú¨Êñá„Ç®„É™„Ç¢ -->
      <div class="col-9">
        <div class="card-body py-3 px-3 d-flex flex-column h-100">
          <h5 class="card-title fs-6 mb-1">
            <%= link_to novel_path(novel), class: "text-decoration-none text-primary fw-semibold" do %>
              <%= truncate(novel.title, length: 28) %>
            <% end %>
          </h5>

          <p class="card-subtitle text-muted small mb-2">
            <% if novel.user %>
              <span class="badge bg-primary me-1">‰ºöÂì°</span>
              <%= link_to novel.user.user_name, user_path(novel.user), class: "text-muted text-decoration-none" %>
            <% elsif novel.author_name.present? %>
              <span class="badge bg-secondary me-1">„Ç≤„Çπ„Éà</span>
              <%= h(novel.author_name) %>
            <% else %>
              <em class="text-muted">‰ΩúËÄÖ‰∏çÊòé</em>
            <% end %>
          </p>

          <p class="card-text small lh-sm mb-2">
            <%= truncate(novel.body, length: 100) %>
          </p>

          <div class="mt-auto text-muted small d-flex justify-content-between">
            <div>
              <%= novel.published? ? "üìÖ " + l(novel.created_at, format: :custom_ja) : "Êõ¥Êñ∞Ôºö" + l(novel.updated_at, format: :custom_ja) %>
            </div>
            <div>
              <% novel.tags.each do |tag| %>
                <span class="badge bg-secondary me-1">#<%= tag.name %></span>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  <% end %>
</div>

<%# „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ÂÖ±ÈÄö„ÅßÂëº„Å≥Âá∫„Åõ„Çã„Çà„ÅÜ„Å´ %>
<%= paginate novels, theme: 'bootstrap-5' if defined?(paginate) %>
